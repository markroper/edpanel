apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'eclipse'

repositories {
    mavenCentral()
}

idea {
    project {
        jdkName = '1.7'
        languageLevel = '1.7'
    }
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'idea'
    evaluationDependsOn(':common')

    compileJava {
        options.compilerArgs << "-Werror"
        options.compilerArgs << "-Xlint:unchecked"
    }

    repositories {
        mavenCentral()
    }
    
    test {
    	useTestNG() {
    		useDefaultListeners = true
    		def suiteFile = "src/test/resources/${project.name}-unit.xml"
    		options.suites(suiteFile)
    		println "project.name: ${project.name} Test: useTestNg"
    	}
    	
    	beforeTest { descriptor ->
    		logger.lifecycle("Running test: " + descriptor)
    	}
    }
}

configure([project(':common'), project(':warehouse')]) { }