<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                     http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean
            class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
            p:searchSystemEnvironment="true"
            p:ignoreResourceNotFound="true"
            p:systemPropertiesModeName="SYSTEM_PROPERTIES_MODE_OVERRIDE"
            p:ignoreUnresolvablePlaceholders="true">
        <property name="locations">
            <list>
            <value>classpath:powerschool.properties</value>
            <value>classpath:edpanel.properties</value>
            </list>
        </property>
    </bean>

    <!-- Initialization for data source -->
    <bean id="testPowerSchoolClient"
          class="com.scholarscore.etl.powerschool.TestPowerSchoolClient">
        <constructor-arg index="0" type="java.lang.String" value="${powerschool.student.spedellextension}"/>
        <constructor-arg index="1" type="java.lang.String" value="${powerschool.student.spedflag}"/>
        <constructor-arg index="2" type="java.lang.String" value="${powerschool.student.ellflag}"/>
        <constructor-arg index="3" type="java.lang.String" value="${powerschool.gpa.formulastring}"/>
    </bean>
    
    <!--
    <bean id="testEdPanelClient"
            class="com.scholarscore.etl.TestApiClientHandler" />
    -->

    <bean id="testEdPanelClient" class="com.scholarscore.etl.TestApiClientFactory" factory-method="buildTestApiClient" />
    
    <bean id="etlEngine" class="com.scholarscore.etl.EtlEngine">
        <property name="powerSchool" ref="testPowerSchoolClient"/>
        <property name="edPanel" ref="testEdPanelClient"/>
        <property name="dailyAbsenceTrigger" value="${scholarscore.etl.sectionabsencestriggeringdailyabsence}"/>
    </bean>
    
</beans>